
status = -1;
var itemList = Array(
Array(2510060, 1, 1, 1), //彩虹裤子公式
Array(2510061, 1, 1, 1), //彩虹手套公式
Array(2510062, 1, 1, 1), //彩虹鞋子公式
//Array(2510063, 1, 1, 1), //内裤公式
//Array(2510064, 1, 1, 1), //手表公式
//Array(2510065, 1, 1, 1), //羽毛鞋公式
Array(2510000, 1, 1, 1), //公式
Array(2510001, 1, 1, 1), //公式
Array(2510002, 1, 1, 1), //公式
Array(2510003, 5, 1, 1), //公式
Array(2510004, 5, 1, 1), //公式
Array(2510005, 5, 1, 1), //公式
Array(2510006, 8, 1, 1), //公式
Array(2510007, 8, 1, 1), //公式
Array(2510008, 8, 1, 1), //公式
Array(2510009, 8, 1, 1), //公式
Array(2510010, 8, 1, 1), //公式
Array(2510011, 5, 1, 1), //公式
Array(2510012, 5, 1, 1), //公式
Array(2510013, 5, 1, 1), //公式
Array(2510014, 5, 1, 1), //公式
Array(2510015, 5, 1, 1), //公式
Array(2510016, 5, 1, 1), //公式
Array(2510017, 5, 1, 1), //公式
Array(2510018, 5, 1, 1), //公式
Array(2510019, 5, 1, 1), //公式
Array(2510020, 5, 1, 1), //公式
Array(2510021, 5, 1, 1), //公式
Array(2510022, 5, 1, 1), //公式
Array(1113149, 40, 1, 1), //银花戒指
Array(1022226, 40, 1, 1),//独眼巨人
Array(1012319, 40, 1, 1), //8点点红
Array(1402037, 200, 1, 1), //龙背
//Array(1382049, 200, 1, 1), //朱雀
//Array(1382050, 200, 1, 1), //玄武
//Array(1382051, 200, 1, 1), //白虎
//Array(1382052, 200, 1, 1), //青龙
//Array(1382037, 200, 1, 1), //偃月
Array(1022144, 10, 1, 1), //瞳印
Array(2041315, 20, 1, 1), //腰带卷
Array(2040815, 20, 1, 1), //手套卷
Array(2040903, 20, 1, 1), //盾牌卷
Array(1102041, 200, 1, 1), //浪人披风(粉)
Array(1102042, 300, 1, 1), //浪人披风(紫)
Array(1122017, 10, 1, 1), //精灵吊坠
//Array(2028004, 20, 1, 1), //神秘时装坐骑随机箱
Array(4031504, 400, 1, 1),//蓝色
Array(4031505, 300, 1, 1),//橙色
Array(4031506, 200, 1, 1),//绿色
//Array(2028175, 100, 1, 1), //宿命
//Array(4001245, 20, 1, 1), //黄金猪猪
//Array(2046173, 10, 1, 1), //宿命
//Array(2041235, 300, 1, 1), //项链
//Array(2041136, 300, 1, 1), //戒指
//Array(2041139, 300, 1, 1), //戒指
Array(4011008, 30, 1, 1), //锂
Array(4011007, 30, 1, 1), //月石
//Array(2070024, 100, 1, 9999), //无限飞镖
//Array(2070019, 100, 1, 1), //盘子镖
Array(4170012, 200, 1, 1), //必成币
Array(2049100, 500, 2, 1), //混沌卷
Array(2049116, 200, 1, 1), //强化混沌卷
Array(4000463, 300, 1, 1), //中介币
Array(4002000, 400, 1, 1), //邮票
Array(4002001, 400, 1, 1), //邮票
Array(4002002, 400, 1, 1), //邮票
Array(4002003, 400, 1, 1), //邮票
Array(3010718, 300, 1, 1), //初恋云朵
Array(3010594, 300, 1, 1), //蓝莓蛋糕
Array(3010658, 300, 1, 1), //夏日西瓜
Array(3010286, 300, 1, 1), //诺特勒斯
Array(3010660, 300, 1, 1), //梦幻公主城堡
Array(3010661, 300, 1, 1), //欢乐相框
Array(3010643, 300, 1, 1), //10周年蛋糕
Array(3010608, 300, 1, 1), //完美的名画
Array(1422011, 200, 1, 1), //清酒
Array(1442018, 300, 1, 1), //冻冻鱼
Array(1442046, 200, 1, 1), //超级雪板 
Array(1432046, 200, 1, 1), //圣诞拐杖树  
Array(1432039, 300, 1, 1), //钓鱼竿
Array(1432013, 300, 1, 1), //南瓜枪 
Array(1402044, 400, 1, 1), //南瓜
Array(1372031, 400, 1, 1), //圣贤之丈
Array(1372017, 500, 1, 1), //路灯
Array(1442022, 500, 1, 1), //拖把 
Array(1322006, 500, 1, 1), //钢管
Array(1312012, 500, 1, 1), //呼啦圈 
Array(1322051, 500, 1, 1), //七夕
Array(1302001, 400, 1, 1), //锯子
Array(1302080, 400, 1, 1), //闪光彩灯鞭 
Array(1302065, 400, 1, 1), //蓝色枫叶旗 
//Array(1302058, 400, 1, 1), //枫叶伞
Array(1302049, 400, 1, 1), //光线鞭
Array(1302037, 500, 1, 1), //小号
Array(1302036, 500, 1, 1), //枫叶小旗 
Array(1432018, 500, 1, 1), //蓝色滑雪板
Array(1442030, 500, 1, 1), //枫之雪板
Array(1432017, 400, 1, 1), //绿色滑雪板
Array(1432018, 3, 1, 1), //蓝色滑雪板
Array(1432015, 4, 1, 1), //红色滑雪板
Array(1022060, 300, 1, 1), //狐猴
Array(1012070, 3, 1, 1), //雪糕
Array(1012071, 200, 1, 1), //雪糕
Array(1012072, 5, 1, 1), //雪糕
Array(1012073, 2, 1, 1), //雪糕
Array(1022058, 200, 1, 1), //狸
Array(1092045, 30, 1, 1), //高级法盾
Array(1092046, 15, 1, 1), //高级战盾
Array(1092050, 100, 1, 1), //盾
Array(1092049, 70, 1, 1), //盾
Array(1012307, 500, 1, 1), //冰晶

Array(2210035, 60, 1, 1), //企鹅变身
Array(2210031, 60, 1, 1), //匹诺曹变身
Array(1072747, 10, 1, 1), //baojun
Array(1072746, 10, 1, 1), //
Array(1072745, 10, 1, 1), //
Array(1072744, 10, 1, 1), //
Array(1072743, 10, 1, 1), //
Array(1082547, 10, 1, 1), //
Array(1082546, 10, 1, 1), //
Array(1082545, 10, 1, 1), //
Array(1082544, 10, 1, 1), //
Array(1082543, 10, 1, 1), //
Array(1102485, 10, 1, 1), //
Array(1102484, 10, 1, 1), //
Array(1102483, 10, 1, 1), //
Array(1102482, 10, 1, 1), //
Array(1102481, 10, 1, 1), //
Array(1132178, 10, 1, 1), //
Array(1132177, 10, 1, 1), //
Array(1132176, 10, 1, 1), //
Array(1132175, 10, 1, 1), //
Array(1132174, 10, 1, 1), //

Array(4020000, 50, 1, 1), //矿
Array(4010000, 50, 1, 1), //矿
Array(4010003, 10, 1, 1), //矿
Array(4020004, 10, 1, 1), //矿
Array(4010004, 10, 1, 1), //矿
Array(4020005, 10, 1, 1), //矿
Array(4010005, 20, 1, 1), //矿
Array(4020006, 20, 1, 1), //矿
Array(4010006, 20, 1, 1), //矿
Array(4020007, 30, 1, 1), //矿
Array(4020000, 600, 1, 1), //矿

Array(4010000, 600, 1, 1), //矿
Array(4010003, 600, 1, 1), //矿
Array(4020004, 600, 1, 1), //矿
Array(4010004, 600, 1, 1), //矿
Array(4020005, 600, 1, 1), //矿
Array(4010005, 550, 1, 1), //矿
Array(4020006, 600, 1, 1), //矿
Array(4010006, 600, 1, 1), //矿
Array(4020007, 600, 1, 1), //矿

Array(4011000, 500, 2, 1), //矿
Array(4011001, 500, 2, 1), //矿
Array(4011002, 500, 2, 1), //矿
Array(4011003, 500, 2, 1), //矿
Array(4011004, 500, 2, 1), //矿
Array(4011005, 500, 2, 1), //矿
Array(4011006, 500, 2, 1), //矿
Array(4021000, 500, 2, 1), //矿
Array(4021001, 500, 2, 1), //矿
Array(4021002, 500, 2, 1), //矿
Array(4021003, 500, 2, 1), //矿
Array(4021004, 500, 2, 1), //矿
Array(4021005, 500, 2, 1), //矿
Array(4021006, 500, 2, 1), //矿
Array(4021007, 500, 2, 1), //矿
Array(4021008, 500, 2, 1), //矿
Array(4005000, 300, 10, 1), //水晶
Array(4005001, 300, 10, 1), //水晶
Array(4005002, 300, 10, 1), //水晶
Array(4005003, 300, 10, 1), //水晶
Array(4005000, 200, 20, 1), //水晶
Array(4005001, 200, 20, 1), //水晶
Array(4005002, 200, 20, 1), //水晶
Array(4005003, 200, 20, 1), //水晶
Array(4005000, 500, 10, 1), //水晶
Array(4005001, 500, 10, 1), //水晶
Array(4005002, 500, 10, 1), //水晶
Array(4005003, 500, 10, 1), //水晶
Array(4005000, 500, 20, 1), //水晶
Array(4005001, 500, 20, 1), //水晶
Array(4005002, 500, 20, 1), //水晶
Array(4005003, 500, 20, 1), //水晶
Array(4005004, 400, 5, 1), //水晶
Array(4251202, 200, 1, 1), //水晶
Array(4250802, 50, 1, 1), //高等力量
Array(4251002, 50, 1, 1), //高等幸运
Array(4250902, 50, 1, 1), //高等智慧
Array(4251102, 50, 1, 1), //高等敏捷
Array(4251402, 50, 1, 1), //高等黑暗
Array(2022530, 400, 1, 1),//双倍爆率
Array(2450000, 200, 1, 1) //双倍BUFF

//Array(2100009, 500, 1, 0) //蝙蝠怪包



);

function start() {
    if (cm.canHold(1002677, 1) == false || cm.canHold(2290017, 1) == false || cm.canHold(4001126, 1) == false) {
        cm.sendOk("请保证有充足的背包空间");
        cm.dispose();
    } else {
        action(1, 0, 0);
    }
}

function action(mode, type, selection) {
    if (mode == 1) {
        status++;
    } else {
        if (status == 0) {
            cm.sendOk("再见得把油。");
            cm.dispose();
        }
        status--;
    }
    if (status == 0) {
        if (cm.haveItem(4000463, 20)) {
            var str1 = "\r\n";
            for (var i = 0; i < itemList.length; i++) {
                str1 += "#v" + itemList[i][0] + "#";
            }
            cm.sendYesNo("#L1#消耗20个#v4000463#抽取以下物品!(抽取10次)#l\r\n\r\n\r\n#k当前拥有:#c4000463# 个。 以下是全部物品:" + str1);
        } else {
            var str1 = "\r\n";
            for (var i = 0; i < itemList.length; i++) {
                str1 += "#v" + itemList[i][0] + "#";
            }
            cm.sendOk("消耗20个#v4000463#抽取以下物品个#v4000463#抽取以下物品!\r\n#k当前拥有:#c4000463# 个。 以下是全部物品:" + str1);
            cm.dispose();
        }
    } else if (status == 1) {
        if (selection == 0) {
            var chance = Math.floor(Math.random() * 1000);
            var finalitem = Array();
            for (var i = 0; i < itemList.length; i++) {
                if (itemList[i][1] >= chance) {
                    finalitem.push(itemList[i]);
                }
            }
            if (finalitem.length != 0) {
                var item;
                var random = new java.util.Random();
                var finalchance = random.nextInt(finalitem.length);
                var itemId = finalitem[finalchance][0];
                var quantity = finalitem[finalchance][2];
                var notice = finalitem[finalchance][3];
                item = cm.gainGachaponItem(itemId, quantity, "七七枫叶抽奖", notice);
                if (item != -500) {
                    cm.gainItem(4001126, -500);//获得物品
                    cm.gainItem(4170018, 1);//获得物品
                    cm.sendOk("你获得了 #b#t" + item + "##k " + quantity + "个。");
                } else {
                    cm.sendOk("请你确认在背包的装备，消耗，其他窗口中是否有一格以上的空间。");
                }
                cm.safeDispose();
            } else {
                cm.sendOk("怎么没接住球啊，算了还你宝石吧。");
                cm.safeDispose();
            }
        } else if (selection == 1) {
            if (cm.getInventory(1).isFull(10) == true){
                cm.sendOk("请你确认在背包的装备，消耗，其他窗口中是否有 10 格以上的空间。");
                cm.dispose();
            } else if (cm.getInventory(2).isFull(10) == true){
                cm.sendOk("请你确认在背包的装备，消耗，其他窗口中是否有 10 格以上的空间。");
                cm.dispose();
            } else if (cm.getInventory(3).isFull(10) == true){
                cm.sendOk("请你确认在背包的装备，消耗，其他窗口中是否有 10 格以上的空间。");
                cm.dispose();
            } else if (cm.getInventory(4).isFull(10) == true){
                cm.sendOk("请你确认在背包的装备，消耗，其他窗口中是否有 10 格以上的空间。");
                cm.dispose();
            } else if (cm.getInventory(5).isFull(10) == true){
                cm.sendOk("请你确认在背包的装备，消耗，其他窗口中是否有 10 格以上的空间。");
                cm.dispose();
            } else if (cm.haveItem(4000463,20)){
                var chance = Math.floor(Math.random() * 600);
                var finalitem = Array();
                for (var i = 0; i < itemList.length; i++) {
                    if (itemList[i][1] >= chance) {
                        finalitem.push(itemList[i]);
                    }
                }
                if (finalitem.length != 0) {
                    for (var i = 0; i < 10; i++) {
                    var item;
                    var random = new java.util.Random();
                    var finalchance = random.nextInt(finalitem.length);
                    var itemId = finalitem[finalchance][0];
                    var quantity = finalitem[finalchance][2];
                    var notice = finalitem[finalchance][3];
                    item = cm.gainGachaponItem(itemId, quantity, "点卷抽奖10连抽", notice);
                    }
                    if (item != -500) {
                        cm.gainItem(4000463, -20);//获得物品
                        cm.gainItem(4170018, 10);//获得物品
                        cm.sendOk("5连抽抽取成功。");
                    } else {
                        cm.sendOk("请你确认在背包的装备，消耗，其他窗口中是否有一格以上的空间。");
                    }
                    cm.safeDispose();
                } else {
                    cm.sendOk("怎么没接住球啊，算了还你宝石吧。");
                    cm.safeDispose();
                }
            }
        }
    }
}