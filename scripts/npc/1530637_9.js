/*各种戒指*/
var status = 0;
var choice;
var itemxh = new Array(
    "1004239", 
    "1003843", 
    "1004463", 
    "1004862", 
    "1004863", 
    "1004844", 
    "1004891", 
    "1005007", 
    "1004250", 
    "1004530", 
    "1004540", 
    "1004806", 
    "1004827", 
    "1004275", 
    "1004282", 
    "1004281", 
    "1004166", 
    "1004167", 
    "1004158", 
    "1004120", 
    "1004122", 
    "1004124", 
    "1004125",
    "1004110", "1004111", "1004092", "1004081", "1004033", "1004035", "1003964", "1003917", "1003918", "1003921", "1003910", "1003913", "1003904", "1003883", "1004453", "1000061", "1004801", "1004800", "1004601", "1004802", "1004796", "1004799", "1004814", "1004816", "1004818", "1004819", "1004787", "1004788", "1004790", "1004702", "1004700", "1004641", "1004634", "1004849", "1004848", "1004871", "1004872", "1004873", "1004825", "1004826", "1004843", "1004827", "1004876", "1004874", "1004881", "1004878", "1004907", "1004901", "1004927", "1004928", "1004929", "1004923", "1004924", "1003920", "1004776", "1004463", "1004468", "1004470", "1004472", "1004997", "1005014", "1005015", "1005016", "1005017", "1005018", "1005019");
var itemxhcost = new Array("50000", "250000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "50000", "80000", "80000", "80000", "80000", "80000", "80000", "80000");

function start() {
    status = -1;
    action(1, 0, 0);
}

function action(mode, type, selection) {
    if (mode == -1) cm.dispose();
    else {
        if (status == 0 && mode == 0) {
            cm.dispose();
            return;
        } else if (status >= 1 && mode == 0) {
            cm.sendOk("好吧，欢迎下次继续光临！.");
            cm.dispose();
            return;
        }
        if (mode == 1) status++;
        else status--;

        if (status == 0) {
            choices = "\r\n#fUI/UIWindow2.img/QuestAlarm/BtQ/normal/0#亲爱的#r#h ##k您好，请选择您希望购买的点装";
            for (var i = 0; i < itemxh.length; i++) {
                choices += "\r\n#L" + i + "##v" + itemxh[i] + "##z" + itemxh[i] + "#　#d需要#r" + itemxhcost[i] + "#d点卷#k#l";
            }
            cm.sendSimpleS("#fUI/UIWindow2.img/Quest/quest_info/summary_icon/summary#" + choices, 2);
        } else if (status == 1) {
            cm.sendGetNumber("你选择的商品为#v" + itemxh[selection] + "#售价为：" + itemxhcost[selection] + "点卷/张\r\n请输入你购买的数量", 1, 1, cm.getPlayer().getCSPoints(1));
            choice = selection;
        } else if (status == 2) {
            fee = selection;
            money = fee * itemxhcost[choice];
            if (fee < 0) {
                cm.sendOk("不能输入0.或者你没有足够的点卷支付你要买的数量.!");
                cm.dispose();
            } else if (cm.getPlayer().getCSPoints(1) < money) {
                cm.sendOk("购买失败，你没有" + money + "点卷");
                cm.dispose();
            } else {
                cm.gainNX( - money);
                cm.gainItem(itemxh[choice], fee);
                cm.sendOk("恭喜，购买成功。");
                cm.dispose();
            }
        }
    }
}